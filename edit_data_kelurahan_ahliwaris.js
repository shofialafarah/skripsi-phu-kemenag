// Data kelurahan berdasarkan kecamatan
const kelurahan_ahliwarisData = {
  "Aluh-Aluh": [
    "Aluh-Aluh Besar",
    "Aluh-Aluh Kecil",
    "Aluh-Aluh Kecil Muara",
    "Bakambat",
    "Balimau",
    "Bunipah",
    "Handil Baru",
    "Handil Bujur",
    "Kuin Besar",
    "Kuin Kecil",
    "Labat Muara",
    "Pemurus",
    "Podok",
    "Pulantan",
    "Simpang Warga",
    "Simpang Warga Dalam",
    "Sungai Musang",
    "Tanipah",
    "Terapu",
  ],
  Aranio: [
    "Apuai",
    "Aranio",
    "Artain",
    "Belangian",
    "Benua Riam",
    "Kalaan",
    "Paau",
    "Rantau Balai",
    "Rantau Bujur",
    "Tiwingan Baru",
    "Tiwingan Lama",
  ],
  Astambul: [
    "Astambul Kota",
    "Astambul Seberang",
    "Banua Anyar DS",
    "Banua Anyar ST",
    "Danau Salak",
    "Jati",
    "Kalampaian Tengah",
    "Kalampaian Ilir",
    "Kalampaian Ulu",
    "Kaliukan",
    "Limamar",
    "Lok Gabang",
    "Munggu Raya",
    "Pasar Jati",
    "Pematang Hambawang",
    "Pingaran Ilir",
    "Pingaran Ulu",
    "Sungai Alat",
    "Sungai Tuan Ulu",
    "Sungai Tuan Ilir",
    "Tambak Danau",
    "Tambangan",
  ],
  "Beruntung Baru": [
    "Babirik",
    "Handil Purai",
    "Haur Kuning",
    "Jambu Burung",
    "Jambu Raya",
    "Kampung Baru",
    "Lawahan",
    "Muara Halayung",
    "Pindahan Baru",
    "Rumpiang",
    "Selat Makmur",
    "Tambak Padi",
  ],
  "Cintapuri Darussalam": [
    "Alalak Padang",
    "Benua Anyar",
    "Cintapuri",
    "Garis Hanyar",
    "Karya Makmur",
    "Keramat Mina",
    "Makmur Karya",
    "Simpang Lima",
    "Sindang Jaya",
    "Sumber Sari",
    "Surian Hanyar",
  ],
  Gambut: [
    "Gambut",
    "Gambut Barat",
    "Banyu Hirang",
    "Guntung Papuyu",
    "Guntung Ujung",
    "Kayu Bawang",
    "Keladan Baru",
    "Makmur",
    "Malintang",
    "Malintang Baru",
    "Sungai Kupang",
    "Tambak Sirang Baru",
    "Tambak Sirang Darat",
    "Tambak Sirang Laut",
  ],
  "Karang Intan": [
    "Abirau",
    "Awang Bangkal Barat",
    "Awang Bangkal Timur",
    "Balau",
    "Bi'ih",
    "Jingah Habang Ilir",
    "Jingah Habang Ulu",
    "Karang Intan",
    "Kiram",
    "Lihung",
    "Lok Tangga",
    "Mali-Mali",
    "Mandi Angin Barat",
    "Mandi Angin Timur",
    "Mandi Kapau Barat",
    "Mandi Kapau Timur",
    "Padang Panjang",
    "Pandak Daun",
    "Pasar Lama",
    "Penyambaran",
    "Pulau Nyiur",
    "Sungai Alang",
    "Sungai Arfat",
    "Sungai Asam",
    "Sungai Besar",
    "Sungai Landas",
  ],
  "Kertak Hanyar": [
    "Kertak Hanyar I",
    "Manarap Lama",
    "Mandar Sari",
    "Banua Hanyar",
    "Kertak Hanyar II",
    "Manarap Baru",
    "Manarap Tengah",
    "Mekar Raya",
    "Pasar Kemis",
    "Simpang Empat",
    "Sungai Lakum",
    "Tatah Belayung Baru",
    "Tatah Pemangkih Laut",
  ],
  Mataraman: [
    "Baru",
    "Bawahan Pasar",
    "Bawahan Seberang",
    "Bawahan Selan",
    "Gunung Ulin",
    "Lok Tamu",
    "Mangkalawat",
    "Mataraman",
    "Pasiraman",
    "Pematang Danau",
    "Simpang Tiga",
    "Sungai Jati",
    "Surian",
    "Takuti",
    "Tanah Abang",
  ],
  Martapura: [
    "Jawa",
    "Keraton",
    "Murung Keraton",
    "Pasayangan",
    "Sekumpul",
    "Sungai Paring",
    "Tanjung Rema Darat",
    "Bincau",
    "Bincau Muara",
    "Cindai Alus",
    "Indra Sari",
    "Jawa Laut",
    "Labuan Tabu",
    "Murung Kenanga",
    "Pasayangan Barat",
    "Pasayangan Selatan",
    "Pasayangan Utara",
    "Sungai Sipai",
    "Tambak Baru",
    "Tambak Baru Ilir",
    "Tambak Baru Ulu",
    "Tanjung Rema",
    "Tunggul Irang",
    "Tunggul Irang Ilir",
    "Tunggul Irang Ulu",
    "Tungkaran",
  ],
  "Martapura Barat": [
    "Antasan Sutun",
    "Keliling Benteng Tengah",
    "Keliling Benteng Ulu",
    "Penggalaman",
    "Sungai Batang",
    "Sungai Batang Ilir",
    "Sungai Rangas",
    "Sungai Rangas Hambuku",
    "Sungai Rangas Tengah",
    "Sungai Rangas Ulu",
    "Tangkas",
    "Teluk Selong",
    "Teluk Selong Ulu",
  ],
  "Martapura Timur": [
    "Akar Bagantung",
    "Akar Baru",
    "Antasan Senor",
    "Antasan Senor Ilir",
    "Dalam Pagar",
    "Dalam Pagar Ulu",
    "Keramat",
    "Keramat Baru",
    "Mekar",
    "Melayu Ilir",
    "Melayu Tengah",
    "Melayu Ulu",
    "Pekauman",
    "Pekauman Dalam",
    "Pekauman Ulu",
    "Pematang Baru",
    "Sungai Kitano",
    "Tambak Anyar",
    "Tambak Anyar Ilir",
    "Tambak Anyar Ulu",
  ],
  Paramasan: ["Angkipih", "Paramasan Atas", "Paramasan Bawah", "Remo"],
  Pengaron: [
    "Alimukim",
    "Antaraku",
    "Ati'im",
    "Benteng",
    "Kertak Empat",
    "Lobang Baru",
    "Lok Tunggul",
    "Lumpangi",
    "Mangkauk",
    "Maniapun",
    "Panyiuran",
    "Pengaron",
  ],
  "Sambung Makmur": [
    "Baliangin",
    "Batang Banyu",
    "Batu Tanam",
    "Gunung Batu",
    "Madurejo",
    "Pasar Baru",
    "Sungai Lurus",
  ],
  "Simpang Empat": [
    "Batu Balian",
    "Berkat Mulia",
    "Cabi",
    "Lawiran",
    "Lok Cantung",
    "Paku",
    "Paring Tali",
    "Pasar Lama",
    "Simpang Empat",
    "Sungai Langsat",
    "Sungai Raya",
    "Sungai Tabuk",
    "Sungkai",
    "Sungkai Baru",
    "Tanah Intan",
  ],
  "Sungai Pinang": [
    "Belimbing Baru",
    "Belimbing Lama",
    "Hakim Makmur",
    "Kahelaan",
    "Kupang Rejo",
    "Pakutik",
    "Rantau Bakula",
    "Rantau Nangka",
    "Sumber Baru",
    "Sumber Harapan",
    "Sungai Pinang",
  ],
  "Sungai Tabuk": [
    "Sungai Lulut",
    "Abumbun Jaya",
    "Gudang Hirang",
    "Gudang Tengah",
    "Keliling Benteng Hilir",
    "Lok Baintan",
    "Lok Baintan Dalam",
    "Lok Buntar",
    "Paku Alam",
    "Pejambuan",
    "Pemakuan",
    "Pematang Panjang",
    "Pembantanan",
    "Sungai Bakung",
    "Sungai Bangkal",
    "Sungai Pinang Baru",
    "Sungai Pinang Lama",
    "Sungai Tabuk Keramat",
    "Sungai Tabuk Kota",
    "Sungai Tandipah",
    "Tajau Landung",
  ],
  "Tatah Makmur": [
    "Jaruju Laut",
    "Layap Baru",
    "Mekar Sari",
    "Pandan Sari",
    "Pemangkih Baru",
    "Taibah Raya",
    "Tampang Awang",
    "Tatah Bangkal",
    "Tatah Bangkal Tengah",
    "Tatah Jaruju",
    "Tatah Layap",
    "Tatah Pemangkih Darat",
    "Tatah Pemangkih Tengah",
  ],
  "Telaga Bauntung": ["Lok Tanah", "Rampah", "Rantau Bujur", "Telaga Baru"],
};

// Mendapatkan elemen select
const kecamatan_ahliwarisSelect = document.getElementById('kecamatan_ahliwaris');
const kelurahan_ahliwarisSelect = document.getElementById('kelurahan_ahliwaris');

// Fungsi untuk mengisi dropdown kelurahan berdasarkan kecamatan
function populateKelurahan(selectedKecamatan, selectedKelurahan = '') {
    // Mengosongkan dropdown kelurahan
    kelurahan_ahliwarisSelect.innerHTML = '<option value="" disabled>--- Pilih Kelurahan ---</option>';

    // Jika ada kecamatan yang dipilih
    if (selectedKecamatan && kelurahan_ahliwarisData[selectedKecamatan]) {
        // Mengambil data kelurahan untuk kecamatan yang dipilih
        const kelurahan_ahliwarisList = kelurahan_ahliwarisData[selectedKecamatan];

        // Menambahkan opsi kelurahan ke dropdown
        kelurahan_ahliwarisList.forEach(kelurahan_ahliwaris => {
            const option = document.createElement('option');
            option.value = kelurahan_ahliwaris;
            option.textContent = kelurahan_ahliwaris;
            
            // Jika ini adalah kelurahan yang sudah dipilih sebelumnya (untuk edit), maka set sebagai selected
            if (kelurahan_ahliwaris === selectedKelurahan) {
                option.selected = true;
            }
            
            kelurahan_ahliwarisSelect.appendChild(option);
        });
    }
}

// Event listener untuk perubahan pada select kecamatan
kecamatan_ahliwarisSelect.addEventListener('change', function() {
    const selectedKecamatan_ahliwaris = this.value;
    populateKelurahan(selectedKecamatan_ahliwaris);
});

// Inisialisasi saat halaman dimuat (untuk form edit)
document.addEventListener('DOMContentLoaded', function() {
    // Ambil nilai kecamatan dan kelurahan yang sudah ada (dari database)
    const currentKecamatan = kecamatan_ahliwarisSelect.value;
    const currentKelurahan = kelurahan_ahliwarisSelect.value;
    
    // Jika ada kecamatan yang sudah dipilih, populate kelurahan
    if (currentKecamatan) {
        populateKelurahan(currentKecamatan, currentKelurahan);
    }
});

// Alternatif: Jika Anda ingin langsung set nilai dari PHP/backend
// Fungsi ini bisa dipanggil dari PHP dengan nilai yang sudah ada
function initializeEditForm(kecamatan, kelurahan) {
    // Set nilai kecamatan
    kecamatan_ahliwarisSelect.value = kecamatan;
    
    // Populate dan set kelurahan
    populateKelurahan(kecamatan, kelurahan);
}